# README

## LLMを使った会話アプリ

このアプリは、音声入力を使用して対話を行うための簡単なアプリケーションです。音声を録音し、Whisperを使用して文字起こしを行い、その結果に基づいてLLMから応答を取得します。また、応答を音声として再生します。

### 必要なライブラリ

以下のライブラリが必要です。必要に応じてインストールしてください。

```bash
pip install whisper pyaudio numpy torch requests soundfile sounddevice ollama
```

CUDAを使用する場合、PyTorchをCUDAに合わせてインストールする必要があります。詳細は[PyTorchの公式サイト](https://pytorch.org/)を参照してください。

### アプリケーションの構成

1. **LLM**: 対話型モデル。入力に基づいて応答を生成します。
2. **音声認識**: 音声を文字起こしするためのモデル。
3. **音声合成**: 生成された応答を音声として再生します。

### 主要なクラス

- `OllamaLlmAdapter`: ユーザーの入力をLLMに送信し、応答を取得するためのクラス。
- `WhisperSttAdapter`: 音声認識を介して音声データを取得するためのクラス。
- `Sbv2TtsAdapter`: 音声合成APIを介して音声データを取得するためのクラス。

### 主な機能

- 文字起こし: 音声をWhisperを用いて文字起こしします。
- 応答の生成: 文字起こし結果をLLMに送信し、応答を取得します。
- 音声再生: 取得した応答を音声として再生します。

### 使用方法

1. スクリプトを実行します。
2. マイクから音声を録音するように指示されます。
3. 録音が完了すると、音声が文字起こしされ、その結果に基づいて応答が生成されます。
4. 応答は音声として再生されます。
5. これを繰り返します。終了するには、`Ctrl+C`を押してください。

### 注意事項

- 録音する際のサンプリングレートは16kHzである必要があります。
- 特定の文字列が認識された場合、ハルシネーションの疑いがあるため、その入力はスキップされます。